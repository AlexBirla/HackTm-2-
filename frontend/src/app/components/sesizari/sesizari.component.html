<div *ngIf="role === 'admin'" class="download-report-container">
  <button mat-raised-button color="primary" (click)="downloadReport()">
    <mat-icon>file_download</mat-icon>
    Descarcă Raport Sesizari
  </button>
</div>

<div class="cards-container">
  <mat-card *ngFor="let item of (role === 'admin' ? allData : userData)" class="sesizare-card">
    <div class="card-content">
      <div class="card-image-container">
        <img
          *ngIf="item.url_poza && item.url_poza.length; else noImage"
          [src]="item.url_poza"
          alt="Complaint Image"
          class="card-image"
        />
        <ng-template #noImage>
          <div class="no-image-placeholder">
            <mat-icon>image_not_supported</mat-icon>
            <span>No Image</span>
          </div>
        </ng-template>
      </div>

      <!-- RIGHT COLUMN: All textual details -->
      <div class="card-details-container">
        <!-- Top row: Title (center‐left) + Status badge (top‐right) -->
        <div class="card-header">
          <div class="card-title">
            {{ item.titlu }}
          </div>
          <div class="card-status">
            <mat-chip disabled
                [ngClass]="{
                    'status-chip--active': item.status === 'active',
                    'status-chip--removed': item.status === 'removed',
                    'status-chip--warning': item.status === 'warning' || item.status === 'pending'
                }"
                selected
                >
                {{ item.status | titlecase }}
            </mat-chip>
          </div>
        </div>

        <div class="card-category">
          Categorie: {{ item.categorie }}
        </div>

        <div class="card-created-at">
          {{ item.created_at | date: 'medium' }}
        </div>

        <div class="card-description">
          {{ item.descriere }}
        </div>

        <div class="card-footer">
            <button mat-button [ngClass]="{'disable-click-up': 'disabled'}">
                <mat-icon aria-hidden="false" aria-label="Upvotes">
                    arrow_upward
                </mat-icon>
                {{ item.upvotes }}
            </button>
          
            <button mat-button [ngClass]="{'disable-click-down': 'disabled'}">
                <mat-icon aria-hidden="false" aria-label="Downvotes">
                    arrow_downward
                </mat-icon>
                {{ item.downvotes }}
            </button>

        </div>
      </div>
    </div>
  </mat-card>
</div>
